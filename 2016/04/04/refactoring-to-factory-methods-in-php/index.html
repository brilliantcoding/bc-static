<!DOCTYPE html><html
lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta
charset="UTF-8"><meta
name="viewport" content="width=device-width, initial-scale=1"><link
rel="profile" href="http://gmpg.org/xfn/11"> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-74127232-1', 'auto',{
		'anonymizeIp': true,
		'storage': 'none',
		'siteSpeedSampleRate': 90
	});
	ga('require', 'autotrack');
	ga('send', 'pageview');</script> <title>Refactoring to Factory Function in PHP &ndash; Brilliant Coding Blog</title><link
rel="canonical" href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/" /><meta
property="og:locale" content="en_US" /><meta
property="og:type" content="article" /><meta
property="og:title" content="Refactoring to Factory Function in PHP &ndash; Brilliant Coding Blog" /><meta
property="og:description" content="This is a quick example to show a simple PHP refactoring for object creation.  Specifically our goal is to use static functions to better encapsulate our object constructor calls. In this example, we assume that we have a flexible message constructor that allows us to build messages given some text and time information. public function &hellip;" /><meta
property="og:url" content="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/" /><meta
property="og:site_name" content="Brilliant Coding Blog" /><meta
property="article:publisher" content="https://www.facebook.com/brilliantcoding/" /><meta
property="article:tag" content="PHP" /><meta
property="article:section" content="Code Refactor" /><meta
property="article:published_time" content="2016-04-04T05:49:52+00:00" /><meta
property="article:modified_time" content="2016-04-25T06:20:34+00:00" /><meta
property="og:updated_time" content="2016-04-25T06:20:34+00:00" /><meta
property="og:image" content="https://brilliantcoding.com/wp-content/uploads/2016/03/RefactortoFactoryFunctioninPHP.gif" /><meta
name="twitter:card" content="summary" /><meta
name="twitter:description" content="This is a quick example to show a simple PHP refactoring for object creation.  Specifically our goal is to use static functions to better encapsulate our object constructor calls. In this example, we assume that we have a flexible message constructor that allows us to build messages given some text and time information. public function [&hellip;]" /><meta
name="twitter:title" content="Refactoring to Factory Function in PHP &ndash; Brilliant Coding Blog" /><meta
name="twitter:site" content="@brilliantcoding" /><meta
name="twitter:image" content="https://brilliantcoding.com/wp-content/uploads/2016/03/RefactortoFactoryFunctioninPHP.gif" /><meta
name="twitter:creator" content="@brilliantcoding" /><link
rel='dns-prefetch' href='//fonts.googleapis.com' /><link
rel='dns-prefetch' href='//s.w.org' /><link
rel="alternate" type="application/rss+xml" title="Brilliant Coding Blog &raquo; Feed" href="https://brilliantcoding.com/feed/rss.xml" /><link
rel="alternate" type="application/rss+xml" title="Brilliant Coding Blog &raquo; Refactoring to Factory Function in PHP Comments Feed" href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/feed/rss.xml" /><link
rel='stylesheet' id='bc-847cba1013f2ef83c10e8641953cb3bc-css'  href='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/css/bc.min.css' type='text/css' media='all' /><link
rel='stylesheet' id='bc-opensans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300%2C400%2C700%2C700italic%2C400italic%2C300italic%7COpen+Sans+Condensed%3A700%2C700italic&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/dep/jquery-slim.min.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/dep/popper.min.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/anchor.min.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/autotrack.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/bootstrap.min.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/clipboard.min.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/vendor/holder.min.js'></script> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/assets/js/bc.min.js'></script> <meta
name="generator" content="WordPress 4.8.2" /><link
rel="icon" href="https://brilliantcoding.com/wp-content/uploads/2018/01/brilliantcoding-logo.png" sizes="32x32" /><link
rel="icon" href="https://brilliantcoding.com/wp-content/uploads/2018/01/brilliantcoding-logo.png" sizes="192x192" /><link
rel="apple-touch-icon-precomposed" href="https://brilliantcoding.com/wp-content/uploads/2018/01/brilliantcoding-logo.png" /><meta
name="msapplication-TileImage" content="https://brilliantcoding.com/wp-content/uploads/2018/01/brilliantcoding-logo.png" /></head><body
class="post-template-default single single-post postid-147 single-format-standard"><a
id="bc-skippy" class="sr-only sr-only-focusable" href="#content">
<span
class="bc-skiplink-text">Skip to content</span>
</a><header
class="bc-navbar nav navbar navbar-expand navbar-dark flex-column flex-md-row"><div
class="navbar-nav-scroll"><ul
class="navbar-nav d-flex align-items-center"><li
class="navbar-item"><a
class="nav-link " href="https://brilliantcoding.com/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<span
class="font-weight-bold">Home</span>
</a></li><li
class="navbar-item"><a
class="nav-link " href="https://brilliantcoding.com/now/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<span
class="font-weight-bold">Now</span>
</a></li><li
class="navbar-item"><a
class="nav-link " href="https://brilliantcoding.com/about/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<span
class="font-weight-bold">About</span>
</a></li></ul></div><ul
class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li
class="navbar-item"><a
class="nav-link " href="https://github.com/brilliantcoding" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-github" aria-hidden="true"></i>
</a></li><li
class="navbar-item"><a
class="nav-link " href="https://twitter.com/brilliantcoding" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-twitter" aria-hidden="true"></i>
</a></li><li
class="navbar-item"><a
class="nav-link " href="https://www.facebook.com/Brilliant-Coding-1500149683622222/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-facebook" aria-hidden="true"></i>
</a></li><li
class="navbar-item"><a
class="nav-link " href="https://brilliantcoding.com/feed/rss.xml" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-rss" aria-hidden="true"></i>
</a></li></ul></header><div
class="blog-title mt-2"><div
class="container d-flex"><div>
<span
class="float-left mr-3">
<img
src="https://brilliantcoding.com/wp-content/uploads/2018/01/brilliantcoding-logo.png" />
</span></div><div
class="align-self-end"><h1 class="site-title">
Brilliant Coding Blog</h1><p
class="site-description mb-0">Be Brilliant</p></div></div></div> <script src="https://apis.google.com/js/platform.js" async defer></script> <div
id="fb-root"></div> <script>(function(d, s, id) {
	var js, fjs = d.getElementsByTagName(s)[0];
	if (d.getElementById(id)) return;
	js = d.createElement(s); js.id = id;
	js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
	fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> <div
class="blog-content bc-content"><div
class="container">
<article
id="post-147" class="h-entry row mt-5 bc-post-article"><div
class="col-md-12 text-md-left text-center ml-3 pb-5 bc-border"><h2 class="p-name">Refactoring to Factory Function in PHP</h2><div
class="clearfix">Tags: <a
href="https://brilliantcoding.com/tag/php/" rel="tag">PHP</a></div>
<span>Posted on:</span>
<span
class="clearfix">
<time
class="dt-published" datetime="2016-04-04T05:49:52+00:00">
April 4, 2016						</time>
</span>
<span>Last modified:</span>
<span
class="clearfix">
<time
class="dt-updated" datetime="2016-04-25T06:20:34+00:00">
April 25, 2016						</time>
</span>
<span>Published by:</span>
<span
class="clearfix">
<a
class="p-author h-card" href="https://brilliantcoding.com/author/mjjacko/">
Matthew Jackowski
</a>
</span><div
class="e-content"><p
style="text-align: left;">This is a quick example to show a simple PHP refactoring for object creation.  Specifically our goal is to use static functions to better encapsulate our object constructor calls.</p><p><span
id="more-147"></span></p><style type="text/css">@import url("https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/highlight/styles/monokai.css");</style> <script src="https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> <style>@font-face {
    font-family: "Iosevka";
    src: url(https://brilliantcoding.com/wp-content/themes/brilliantcodingalpha/iosevka/iosevka-regular.ttf) format("truetype");
}</style><p>In this example, we assume that we have a flexible message constructor that allows us to build messages given some text and time information.</p><pre><code class="php">
public function __construct( $text, $scheduleTime, $waitDuration ) {
	if ( $scheduleTime ) {
	        $this-&gt;sendTime = $scheduleTime;
	} else if ( $waitDuration ) {
		$this-&gt;sendTime = time() + $waitDuration;
	} else {
		$this-&gt;sendTime = time();
	}
	$this-&gt;text = $text;
}
</code>
</pre><p>A very direct way of creating message objects is to simply invoke the &#8216;new&#8217; keyword to assign new messages to variables, like this:</p><pre><code class="php">
$msg1 = new Message( 'say anything', false, false );
$msg2 = new Message( 'say anything later', '2012-05-21 22:02:00', false );
$msg3 = new Message( 'wait a  bit to say anything', false, 20 );
</code>
</pre><p>The reason we want to refactor this approach is because when you directly call the constructors, you need to ensure that all of the params are given, even if there are some params which can be omitted for a given message &#8216;type&#8217;. So instead, it would be easier to simply specify the params we need for the 3 message &#8216;types&#8217;. So let&#8217;s introduce a class and some static functions to help us with this encapsulation:</p><pre><code class="php">
class MessageFactory {
	static function immediateMessage( $text ) {
		return new Message( $text, false, false );
	}

	static function scheduledMessage( $text, $time ) {
		return new Message( $text, $time, false );
	}

	static function delayedMessage( $text, $duration ) {
		return new Message( $text, false, $duration );
	}
}
</code></pre><p>Now creating our messages is much easier:</p><pre><code class="php">
$msg1 = MessageFactory::immediateMessage( 'say anything' );
$msg2 = MessageFactory::scheduledMessage( 'say anything later', '2012-05-21 22:02:00' );
$msg3 = MessageFactory::delayedMessage( 'wait a  bit to say anything', 20 );
</code></pre><p>Even though the factory functions adds a few extra lines of code, it is worthwhile because it clarifies the intent during object creation.  Also it provides a useful buffer between the object classes and our code such that if the object constructor change, we can manage these changes directly in the factory functions.</p><p>It&#8217;s also important to note that the full factory method pattern involves much more complexity and will require subclasses or interfaces.  Wikipedia has an example of this type of approach in PHP <a
href="https://en.wikipedia.org/wiki/Factory_method_pattern#PHP" target="_blank">here</a>.<br
/>
The full version of this code can be found in a Gist <a
href="https://gist.github.com/matthewjackowski/a81a69034102ab06ac9c0065233dbf84" target="_blank">here</a>.</p></div></div>
<a
id="bc-skippy" class="sr-only sr-only-focusable" href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/">
<span
class="bc-skiplink-text">Refactoring to Factory Function in PHP</span>
</a></article></div></div><div
id="disqus_thread" class="m-5"></div> <script>/**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
     
     var disqus_config = function () {
     	this.page.url = 'https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/';
     	this.page.identifier = 'refactoring-to-factory-methods-in-php';
     	this.page.title = 'Refactoring to Factory Function in PHP';
     };
     
    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
    	var d = document, s = d.createElement('script');
    	
        s.src = '//brilliantcoding.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
        
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();</script> <noscript>Please enable JavaScript to view the <a
href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><footer
id="colophon" class="bc-footer" role="contentinfo"><div
class="container"><div
class="bc-social-icons"><ul
class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li
class="navbar-item"><a
class="nav-link " href="https://github.com/brilliantcoding" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-github" aria-hidden="true"></i>
GIthub			</a></li><li
class="navbar-item"><a
class="nav-link " href="https://twitter.com/brilliantcoding" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-twitter" aria-hidden="true"></i>
Twitter			</a></li><li
class="navbar-item"><a
class="nav-link " href="https://www.facebook.com/Brilliant-Coding-1500149683622222/" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-facebook" aria-hidden="true"></i>
Facebook			</a></li><li
class="navbar-item"><a
class="nav-link " href="https://brilliantcoding.com/feed/rss.xml" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Bootstrap');">
<i
class="fa fa-rss" aria-hidden="true"></i>
RSS			</a></li></ul></div><div
class="bc-copyright">
<span>© 2017 Matthew Jackowski</span>
<span>- Powered by the <a
href="https://github.com/brilliantcoding/bc-wptheme">Brilliant Coding Wordpress Theme</a></span></div>		</div>
	</footer>
</body>
</html>