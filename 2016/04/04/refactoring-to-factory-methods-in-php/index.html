<!DOCTYPE html><html
lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta
charset="UTF-8"><meta
name="viewport" content="width=device-width, initial-scale=1"><link
rel="profile" href="http://gmpg.org/xfn/11"><title>Refactoring to Factory Function in PHP &ndash; Brilliant Coding Blog</title><meta
name="description" content="This is a quick example to show a simple PHP refactoring for object creation. Specifically our goal is to use static functions to better encapsulate our object constructor calls."/><meta
name="robots" content="noodp"/><link
rel="canonical" href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/" /><meta
property="og:locale" content="en_US" /><meta
property="og:type" content="article" /><meta
property="og:title" content="Refactoring to Factory Function in PHP &ndash; Brilliant Coding Blog" /><meta
property="og:description" content="This is a quick example to show a simple PHP refactoring for object creation. Specifically our goal is to use static functions to better encapsulate our object constructor calls." /><meta
property="og:url" content="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/" /><meta
property="og:site_name" content="Brilliant Coding Blog" /><meta
property="article:publisher" content="https://www.facebook.com/brilliantcoding/" /><meta
property="article:tag" content="PHP" /><meta
property="article:section" content="Code Refactor" /><meta
property="article:published_time" content="2016-04-04T05:49:52+00:00" /><meta
property="article:modified_time" content="2016-04-25T06:20:34+00:00" /><meta
property="og:updated_time" content="2016-04-25T06:20:34+00:00" /><meta
property="og:image" content="https://brilliantcoding.com/wp-content/uploads/2016/03/RefactortoFactoryFunctioninPHP.gif" /><meta
name="twitter:card" content="summary" /><meta
name="twitter:description" content="This is a quick example to show a simple PHP refactoring for object creation. Specifically our goal is to use static functions to better encapsulate our object constructor calls." /><meta
name="twitter:title" content="Refactoring to Factory Function in PHP &ndash; Brilliant Coding Blog" /><meta
name="twitter:site" content="@brilliantcoding" /><meta
name="twitter:image" content="https://brilliantcoding.com/wp-content/uploads/2016/03/RefactortoFactoryFunctioninPHP.gif" /><meta
name="twitter:creator" content="@brilliantcoding" /><link
rel='dns-prefetch' href='//fonts.googleapis.com' /><link
rel='dns-prefetch' href='//s.w.org' /><link
rel="alternate" type="application/rss+xml" title="Brilliant Coding Blog &raquo; Feed" href="https://brilliantcoding.com/feed/" /><link
rel="alternate" type="application/rss+xml" title="Brilliant Coding Blog &raquo; Refactoring to Factory Function in PHP Comments Feed" href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/feed/" /><link
rel='stylesheet' id='brilliantcoding-style-css'  href='https://brilliantcoding.com/wp-content/themes/brilliantcoding/style-min.css' type='text/css' media='all' /><link
rel='stylesheet' id='brilliantcoding-opensans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300%2C400%2C700%2C700italic%2C400italic%2C300italic%7COpen+Sans+Condensed%3A700%2C700italic&#038;subset=latin%2Clatin-ext' type='text/css' media='all' /> <script type='text/javascript' src='https://brilliantcoding.com/wp-content/themes/brilliantcoding/js/theme-min.js'></script> <meta
name="generator" content="WordPress 4.6.1" /><link
rel='shortlink' href='https://brilliantcoding.com/?p=147' /><style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style><link
rel="icon" href="https://brilliantcoding.com/wp-content/uploads/2016/02/Brilliant-logo-v1-120x120.png" sizes="32x32" /><link
rel="icon" href="https://brilliantcoding.com/wp-content/uploads/2016/02/Brilliant-logo-v1-120x120.png" sizes="192x192" /><link
rel="apple-touch-icon-precomposed" href="https://brilliantcoding.com/wp-content/uploads/2016/02/Brilliant-logo-v1-120x120.png" /><meta
name="msapplication-TileImage" content="https://brilliantcoding.com/wp-content/uploads/2016/02/Brilliant-logo-v1-120x120.png" /> <script async src='https://brilliantcoding.com/wp-content/themes/brilliantcoding/js/autotrack.js'></script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74127232-1', 'auto',{
  	'anonymizeIp': true,
  	'storage': 'none',
  	'siteSpeedSampleRate': 90
  });
  ga('require', 'autotrack');
  ga('send', 'pageview');</script> </head><body
class="single single-post postid-147 single-format-standard"><div
id="page" class="hfeed site">
<a
class="skip-link screen-reader-text" href="#content">Skip to content</a><header
id="masthead" class="site-header" role="banner"><div
class="site-branding alignleft"><h1 class="site-title" style="background-image: url(https://brilliantcoding.com/wp-content/uploads/2016/02/Brilliant-logo-v1-120x120.png);"><a
href="https://brilliantcoding.com/" rel="home">Brilliant Coding Blog</a></h1><h2 class="site-description">Be Brilliant</h2></div><div
class='social-links alignright'><ul
id="menu-social" class="menu"><li
id="menu-item-12" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12"><a
href="https://twitter.com/brilliantcoding"><span
class="screen-reader-text">Twitter</span></a></li><li
id="menu-item-13" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13"><a
href="https://www.facebook.com/Brilliant-Coding-1500149683622222/"><span
class="screen-reader-text">Facebook</span></a></li><li
id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14"><a
href="https://plus.google.com/101801437148778837314/"><span
class="screen-reader-text">Google+</span></a></li><li
id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15"><a
href="https://github.com/brilliantcoding"><span
class="screen-reader-text">GIthub</span></a></li></ul></div><div
class='navigation-bar'>
<nav
id="site-navigation" class="main-navigation" role="navigation"><div
class="menu-primary-container"><ul
id="menu-primary" class="menu"><li
id="menu-item-10" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10"><a
href="https://brilliantcoding.com/now/">Now</a></li><li
id="menu-item-11" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11"><a
href="https://brilliantcoding.com/about/">About</a></li></ul></div>			</nav></div>
</header><div
id="content" class="site-content">
 <script src="https://apis.google.com/js/platform.js" async defer></script> <div
id="fb-root"></div> <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> <div
id="primary" class="content-area"><p
id="breadcrumbs"><span
xmlns:v="http://rdf.data-vocabulary.org/#"><span
typeof="v:Breadcrumb"><a
href="https://brilliantcoding.com" rel="v:url" property="v:title">Home</a> &gt; <span
rel="v:child" typeof="v:Breadcrumb"><a
href="https://brilliantcoding.com/category/code-refactor/" rel="v:url" property="v:title">Code Refactor</a> &gt; <strong
class="breadcrumb_last">Refactoring to Factory Function in PHP</strong></span></span></span></p>		<main
id="main" class="site-main" role="main">
<article
id="post-147" class="post-147 post type-post status-publish format-standard hentry category-code-refactor tag-php">
<header
class="entry-header"><h1 class="entry-title">Refactoring to Factory Function in PHP</h1><div
class="entry-meta">
<span
class="posted-on"><a
href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/" rel="bookmark"><time
class="entry-date published" datetime="2016-04-04T05:49:52+00:00">April 4, 2016</time><time
class="updated" datetime="2016-04-25T06:20:34+00:00">April 25, 2016</time></a></span><span
class="byline"> <span
class="author vcard"><a
class="url fn n" href="https://brilliantcoding.com/author/mjjacko/">Matthew Jackowski</a></span></span><span
class="tags-links"><a
href="https://brilliantcoding.com/tag/php/" rel="tag">PHP</a></span></div><div
class="entry-meta-social">
<span
class="twitter-button">		<a
href="https://twitter.com/share" class="twitter-share-button" data-url="http://tinyurl.com/y8nrl6l5" data-via="brilliantcoding">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></span><span
class="facebook-button" style="display: inline-block;"><div
class="fb-share-button" data-href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/" data-layout="button"></div></span><span
class="googleplus-button"><div
class="g-plusone" data-annotation="none" data-href="https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/"></div></span></div></header><div
class="entry-content"><p
style="text-align: left;">This is a quick example to show a simple PHP refactoring for object creation.  Specifically our goal is to use static functions to better encapsulate our object constructor calls.</p><p><span
id="more-147"></span></p><style type="text/css">@import url("https://brilliantcoding.com/wp-content/themes/brilliantcoding/highlight/styles/monokai.css");</style> <script src="https://brilliantcoding.com/wp-content/themes/brilliantcoding/highlight/highlight.pack.js"></script> <script>hljs.initHighlightingOnLoad();</script> <style>@font-face {
    font-family: "Iosevka";
    src: url(https://brilliantcoding.com/wp-content/themes/brilliantcoding/iosevka/iosevka-regular.ttf) format("truetype");
}</style><p>In this example, we assume that we have a flexible message constructor that allows us to build messages given some text and time information.</p><pre><code class="php">
public function __construct( $text, $scheduleTime, $waitDuration ) {
	if ( $scheduleTime ) {
	        $this-&gt;sendTime = $scheduleTime;
	} else if ( $waitDuration ) {
		$this-&gt;sendTime = time() + $waitDuration;
	} else {
		$this-&gt;sendTime = time();
	}
	$this-&gt;text = $text;
}
</code>
</pre><p>A very direct way of creating message objects is to simply invoke the &#8216;new&#8217; keyword to assign new messages to variables, like this:</p><pre><code class="php">
$msg1 = new Message( 'say anything', false, false );
$msg2 = new Message( 'say anything later', '2012-05-21 22:02:00', false );
$msg3 = new Message( 'wait a  bit to say anything', false, 20 );
</code>
</pre><p>The reason we want to refactor this approach is because when you directly call the constructors, you need to ensure that all of the params are given, even if there are some params which can be omitted for a given message &#8216;type&#8217;. So instead, it would be easier to simply specify the params we need for the 3 message &#8216;types&#8217;. So let&#8217;s introduce a class and some static functions to help us with this encapsulation:</p><pre><code class="php">
class MessageFactory {
	static function immediateMessage( $text ) {
		return new Message( $text, false, false );
	}

	static function scheduledMessage( $text, $time ) {
		return new Message( $text, $time, false );
	}

	static function delayedMessage( $text, $duration ) {
		return new Message( $text, false, $duration );
	}
}
</code></pre><p>Now creating our messages is much easier:</p><pre><code class="php">
$msg1 = MessageFactory::immediateMessage( 'say anything' );
$msg2 = MessageFactory::scheduledMessage( 'say anything later', '2012-05-21 22:02:00' );
$msg3 = MessageFactory::delayedMessage( 'wait a  bit to say anything', 20 );
</code></pre><p>Even though the factory functions adds a few extra lines of code, it is worthwhile because it clarifies the intent during object creation.  Also it provides a useful buffer between the object classes and our code such that if the object constructor change, we can manage these changes directly in the factory functions.</p><p>It&#8217;s also important to note that the full factory method pattern involves much more complexity and will require subclasses or interfaces.  Wikipedia has an example of this type of approach in PHP <a
href="https://en.wikipedia.org/wiki/Factory_method_pattern#PHP" target="_blank">here</a>.<br
/>
The full version of this code can be found in a Gist <a
href="https://gist.github.com/matthewjackowski/a81a69034102ab06ac9c0065233dbf84" target="_blank">here</a>.</p></div></article><nav
class="navigation post-navigation" role="navigation"><h1 class="screen-reader-text">Post navigation</h1><div
class="nav-links"><div
class="nav-previous"><a
href="https://brilliantcoding.com/2016/03/24/jvm-programming-languages/" rel="prev"><span
class="meta-nav">&larr;</span>&nbsp;Looking ahead: JVM Programming Languages</a></div><div
class="nav-next"><a
href="https://brilliantcoding.com/2016/04/18/list-of-amazing-tech-talks-on-software-development/" rel="next">List of Amazing Tech Talks on Software Development&nbsp;<span
class="meta-nav">&rarr;</span></a></div></div>
</nav><div
id="disqus_thread"></div> <script>/**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    
    var disqus_config = function () {
        this.page.url = 'https://brilliantcoding.com/2016/04/04/refactoring-to-factory-methods-in-php/';
        this.page.identifier = 'refactoring-to-factory-methods-in-php';
	this.page.title = 'Refactoring to Factory Function in PHP';
    };
    
    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document, s = d.createElement('script');
        
        s.src = '//brilliantcoding.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
        
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();</script> <noscript>Please enable JavaScript to view the <a
href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</main></div></div><footer
id="colophon" class="site-footer" role="contentinfo"><div
class="site-info">
Founded by Matthew Jackowski 2016			<span
class="sep"> | </span>
<a
href="http://wordpress.org/">Proudly powered by WordPress</a></div>
</footer></div></body>
</html>
